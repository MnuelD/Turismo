[build]
  publish = "."
  command = "npm run build"

[build.environment]
  NODE_VERSION = "18"

# =============== SITE PÚBLICO ===============
# Página principal
[[redirects]]
  from = "/"
  to = "/site/index.html"

# URLs LIMPAS (sem /site/ na frente)
[[redirects]]
  from = "/sobre"
  to = "/site/sobre.html"

[[redirects]]
  from = "/blog"
  to = "/site/blog.html"

[[redirects]]
  from = "/contato"
  to = "/site/contact.html"

[[redirects]]
  from = "/faq"
  to = "/site/faq.html"

[[redirects]]
  from = "/hoteis"
  to = "/site/hoteis.html"

[[redirects]]
  from = "/restaurantes"
  to = "/site/restaurantes.html"

[[redirects]]
  from = "/mapa"
  to = "/site/mapa.html"

[[redirects]]
  from = "/pagamento"
  to = "/site/pagamento.html"

[[redirects]]
  from = "/registar"
  to = "/site/register.html"

[[redirects]]
  from = "/carrinho"
  to = "/site/cart.html"

[[redirects]]
  from = "/checkout"
  to = "/site/checkout.html"

[[redirects]]
  from = "/confirmacao"
  to = "/site/confirmation.html"

[[redirects]]
  from = "/wishlist"
  to = "/site/wishlist.html"

# =============== ADMIN ===============
# Admin principal (SPA - todas as rotas vão para index.html)
[[redirects]]
  from = "/admin/*"
  to = "/admin/index.html"

# =============== ASSETS ===============
# Assets do site
[[redirects]]
  from = "/site/*"
  to = "/site/:splat"
  force = false

# Assets do admin
[[redirects]]
  from = "/admin/*"
  to = "/admin/:splat"
  force = false

# Assets compartilhados
[[redirects]]
  from = "/assets/*"
  to = "/assets/:splat"
  force = false

# =============== FALLBACK ===============
# 404 - página não encontrada
[[redirects]]
  from = "/*"
  to = "/site/404.html"
  status = 404